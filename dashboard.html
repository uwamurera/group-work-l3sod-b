<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SIMS Dashboard</title>

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Segoe UI',sans-serif;
}

body{
display:flex;
background:#f4f6f9;
}

/* SIDEBAR */
.sidebar{
width:240px;
height:100vh;
background:#0f172a;
color:white;
padding:20px;
position:fixed;
}

.logo{
font-size:22px;
font-weight:bold;
margin-bottom:30px;
}

.sidebar ul{
list-style:none;
}

.sidebar ul li{
padding:14px;
border-radius:8px;
margin-bottom:10px;
cursor:pointer;
transition:0.3s;
}

.sidebar ul li:hover,
.sidebar ul li.active{
background:#2563eb;
}

.sidebar i{
margin-right:10px;
}

/* MAIN */
.main{
margin-left:240px;
width:100%;
padding:20px;
}

/* TOPBAR */
.topbar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:30px;
}

.avatar{
width:40px;
height:40px;
background:#2563eb;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
color:white;
font-weight:bold;
}

/* CARDS */
.cards{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:20px;
margin-bottom:30px;
}

.card{
background:white;
padding:20px;
border-radius:12px;
box-shadow:0 5px 15px rgba(0,0,0,0.05);
}

.card h2{
margin-top:10px;
font-size:28px;
}

/* PRODUCTS */
.products{
background:white;
padding:20px;
border-radius:12px;
box-shadow:0 5px 15px rgba(0,0,0,0.05);
}

.products-header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:15px;
}

.products-header div{
display:flex;
gap:10px;
}

.products input{
padding:8px;
border-radius:8px;
border:1px solid #ccc;
}

.add-btn{
background:#2563eb;
color:white;
padding:8px 15px;
border:none;
border-radius:8px;
cursor:pointer;
}

table{
width:100%;
border-collapse:collapse;
}

th,td{
padding:12px;
text-align:left;
}

th{
background:#f1f5f9;
}

tr:nth-child(even){
background:#f9fafb;
}

.status{
padding:5px 10px;
border-radius:15px;
font-size:12px;
font-weight:bold;
}

.in-stock{
background:#dcfce7;
color:#16a34a;
}

.out-stock{
background:#fee2e2;
color:#dc2626;
}

.delete-btn{
background:#ef4444;
color:white;
border:none;
padding:6px 10px;
border-radius:6px;
cursor:pointer;
}

/* MODAL */
.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,0.4);
justify-content:center;
align-items:center;
}

.modal-content{
background:white;
padding:25px;
border-radius:12px;
width:350px;
}

.modal-content input{
width:100%;
padding:8px;
margin-bottom:10px;
border-radius:8px;
border:1px solid #ccc;
}

.modal-content button{
padding:8px 12px;
border:none;
border-radius:8px;
cursor:pointer;
}

.save-btn{
background:#16a34a;
color:white;
}

.cancel-btn{
background:#ef4444;
color:white;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
<div class="logo">ðŸ“¦ SIMS</div>
<ul>
<li class="active"><i class="fa fa-chart-line"></i>Dashboard</li>
<li><i class="fa fa-box"></i>Products</li>
<li><i class="fa fa-file"></i>Reports</li>
<li><i class="fa fa-gear"></i>Settings</li>
</ul>
</div>

<!-- MAIN -->
<div class="main">

<div class="topbar">
<div>
<h1>Dashboard</h1>
<p>Overview of your inventory status</p>
</div>

<div style="display:flex;align-items:center;gap:15px;">

    <button onclick="logout()" 
    style="background:#ef4444;color:white;border:none;
    padding:8px 12px;border-radius:8px;cursor:pointer;">
        <i class="fa fa-right-from-bracket"></i> Logout
    </button>

    <div>
        <strong>John Doe</strong><br>
        <small>Administrator</small>
    </div>

    <div class="avatar">JD</div>

</div>


</div>
<div class="avatar">JD</div>
</div>
</div>

<!-- CARDS -->
<div class="cards">
<div class="card">
<p>Total Products</p>
<h2 id="totalProducts">0</h2>
</div>

<div class="card">
<p>In Stock</p>
<h2 id="inStock">0</h2>
</div>

<div class="card">
<p>Out of Stock</p>
<h2 id="outStock">0</h2>
</div>
</div>

<!-- PRODUCTS -->
<div class="products">

<div class="products-header">
<h3>Products</h3>

<div>
<input type="text" id="search" placeholder="Search products...">
<button class="add-btn" onclick="openModal()">
<i class="fa fa-plus"></i> Add Product
</button>
</div>
</div>

<table>
<thead>
<tr>
<th>Image</th>
<th>ID</th>
<th>Name</th>
<th>Category</th>
<th>Qty</th>
<th>Price</th>
<th>Status</th>
<th>Action</th>
</tr>
</thead>
<tbody id="productTable"></tbody>
</table>

</div>

</div>

<!-- MODAL -->
<div class="modal" id="productModal">
<div class="modal-content">
<h3>Add Product</h3>
<input type="text" id="pName" placeholder="Product Name">
<input type="text" id="pCategory" placeholder="Category">
<input type="number" id="pQty" placeholder="Quantity">
<input type="number" id="pPrice" placeholder="Price">
<input type="file" id="pImage" accept="image/*">

<div style="display:flex;gap:10px;margin-top:10px;">
<button class="save-btn" onclick="addProduct()">Save</button>
<button class="cancel-btn" onclick="closeModal()">Cancel</button>
</div>
</div>
</div>

<script>

let products = JSON.parse(localStorage.getItem("products")) || [];

function saveProducts(){
localStorage.setItem("products",JSON.stringify(products));
}

function openModal(){
document.getElementById("productModal").style.display="flex";
}

function closeModal(){
document.getElementById("productModal").style.display="none";
}

function addProduct(){

let name=document.getElementById("pName").value;
let category=document.getElementById("pCategory").value;
let qty=document.getElementById("pQty").value;
let price=document.getElementById("pPrice").value;
let imageInput=document.getElementById("pImage");

if(!name || !category || !qty || !price){
alert("Fill all fields");
return;
}

let reader=new FileReader();

reader.onload=function(e){

let newProduct={
id:"PRD-"+Math.floor(Math.random()*1000),
name:name,
category:category,
qty:parseInt(qty),
price:parseFloat(price),
image:e.target.result
};

products.push(newProduct);
saveProducts();
renderProducts();
closeModal();
};

if(imageInput.files[0]){
reader.readAsDataURL(imageInput.files[0]);
}else{
alert("Select image");
}
}

function renderProducts(){

let table=document.getElementById("productTable");
table.innerHTML="";

let inStock=0;
let outStock=0;

products.forEach((p,index)=>{

let status=p.qty>0?
`<span class="status in-stock">In Stock</span>`:
`<span class="status out-stock">Out of Stock</span>`;

if(p.qty>0) inStock++;
else outStock++;

table.innerHTML+=`
<tr>
<td><img src="${p.image}" width="50" height="50" style="border-radius:8px;"></td>
<td>${p.id}</td>
<td>${p.name}</td>
<td>${p.category}</td>
<td>${p.qty}</td>
<td>$${p.price}</td>
<td>${status}</td>
<td>
<button class="delete-btn" onclick="deleteProduct(${index})">Delete</button>
</td>
</tr>`;
});

document.getElementById("totalProducts").innerText=products.length;
document.getElementById("inStock").innerText=inStock;
document.getElementById("outStock").innerText=outStock;
}

function deleteProduct(index){
products.splice(index,1);
saveProducts();
renderProducts();
}

document.getElementById("search").addEventListener("keyup",function(){
let value=this.value.toLowerCase();
let rows=document.querySelectorAll("#productTable tr");

rows.forEach(row=>{
row.style.display=row.innerText.toLowerCase().includes(value)?"":"none";
});
});

renderProducts();
function logout(){
    localStorage.removeItem("loggedInUser");
    window.location.href = "login.html";
}


</script>

</body>
</html>
